theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=seq(0,0.1,length.out = 100)), size=1, color="blue") + ylim(0,1)+
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Price ($)")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Price ($)")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")+ylim(0,1)
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Price ($)")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Price ($)")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Price ($)")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")+
ccoord_cartesian(xlim=c(0,1),ylim=c(0,1))
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Price ($)")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")+
coord_cartesian(xlim=c(0,1),ylim=c(0,1))
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Price ($)")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")+
coord_cartesian(xlim=c(0,0.1),ylim=c(0,0.1))
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Price ($)")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")+
coord_cartesian(xlim=c(0,0.1),ylim=c(0,1))
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Revenue, as a fraction of unconstrained revenue")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")+
coord_cartesian(xlim=c(0,0.1),ylim=c(0,1))
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Revenue")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Temperature down, price up")+
coord_cartesian(xlim=c(0,0.1),ylim=c(0,1))
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Revenue/Unconstrained revenue")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Change in revenue and ")+
coord_cartesian(xlim=c(0,0.1),ylim=c(0,1))
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Revenue")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) + ggtitle("Change in revenue and market outcomes for political advertisers")+
coord_cartesian(xlim=c(0,0.1),ylim=c(0,1))
ggplot() +
geom_line( aes(x=seq(0,0.1,length.out = 100),  y= calcshare(100,seq(0,0.1,length.out = 100))),size=1, color="red") +
geom_line( aes(x=seq(0,0.1,length.out = 100), y=1-seq(0,0.1,length.out = 100)), size=1, color="blue") +
scale_y_continuous(
name = "Increase in share of ads won by politicians",
sec.axis = sec_axis(~.*1, name="Revenue")
) +xlab(TeX("$ \\frac{\\alpha}{1-\\alpha} $"))+
theme(
axis.title.y = element_text(color = "red", size=13),
axis.title.y.right = element_text(color = "blue", size=13)
) +
coord_cartesian(xlim=c(0,0.1),ylim=c(0,1))
load("~/Desktop/Auctions_project/Twitter_project/twitter_ads.RData")
load("~/Desktop/Auctions_project/Twitter_project/usa_ads_analysis.RData")
rm(pol_ads,soc_ads,state_summaries,usa_ads,ad_country,ad_level,ad_org,ad_parties,ad_states,advertisers_pol)
rm(i)
setwd("~/Desktop/Sites/Auctions_regulation")
save.image("~/Desktop/Sites/Auctions_regulation/polads_dataset.RData")
View(two_party_ads)
stan_data<-data.frame(as.matrix(0))
#Create STAN readable dataset
stan_data<-data.frame(as.matrix(0,ncol=9))
for(i in 1:1161){
datarow<-two_party_ads[i,]
impressions<-datarow$ad_imp
id<-datarow$adv_id
spend<-datarow$ad_spend
male_share<-datarow$men
female_share<-datarow$women
twenty_share<-datarow$twenties/impressions
thirty_share<-datarow$thirties/impressions
fourty_share<-datarow$fourties/impressions
fifty_share<-datarow$fifties/impressions
party<-datarow$ad_parties
new_row<-c(id,spend,male_share,female_share,twenty_share,thirty_share,fourty_share,fifty_share,party)
}
as.matrix(0,ncol=9)
data.frame(matrix(0,ncol=9))
colnames(stan_data)<-c("id","spend","male_share","female_share","twenty_share","thirty_share","fourty_share","fifty_share","party")
stan_data<-data.frame(matrix(0,ncol=9))
colnames(stan_data)<-c("id","spend","male_share","female_share","twenty_share","thirty_share","fourty_share","fifty_share","party")
stan_data<-data.frame(matrix(0,ncol=9))
colnames(stan_data)<-c("id","spend","male_share","female_share","twenty_share","thirty_share","fourty_share","fifty_share","party")
for(i in 1:1161){
datarow<-two_party_ads[i,]
impressions<-datarow$ad_imp
id<-datarow$adv_id
spend<-datarow$ad_spend
male_share<-datarow$men
female_share<-datarow$women
twenty_share<-datarow$twenties/impressions
thirty_share<-datarow$thirties/impressions
fourty_share<-datarow$fourties/impressions
fifty_share<-datarow$fifties/impressions
party<-datarow$ad_parties
new_row<-c(id,spend,male_share,female_share,twenty_share,thirty_share,fourty_share,fifty_share,party)
stan_data<-rbind(stan_data,new_row)
}
stan_data<-stan_data[-1,]
View(stan_data)
stan_data<-data.frame(matrix(0,ncol=9))
colnames(stan_data)<-c("id","spend","male_share","female_share","twenty_share","thirty_share","fourty_share","fifty_share","party")
for(i in 1:1161){
datarow<-two_party_ads[i,]
impressions<-datarow$ad_imp
id<-datarow$adv_id
spend<-datarow$ad_spend
male_share<-datarow$men/impressions
female_share<-datarow$women/impressions
twenty_share<-datarow$twenties/impressions
thirty_share<-datarow$thirties/impressions
fourty_share<-datarow$fourties/impressions
fifty_share<-datarow$fifties/impressions
party<-datarow$ad_parties
new_row<-c(id,spend,male_share,female_share,round(1-fifty_share-fourty_share-thirty_share,3),
round(1-fifty_share-fourty_share,3),
rounf(1-fifty_share,3),
round(fifty_share,3),party)
stan_data<-rbind(stan_data,new_row)
}
stan_data<-stan_data[-1,]
#Create STAN readable dataset
stan_data<-data.frame(matrix(0,ncol=9))
colnames(stan_data)<-c("id","spend","male_share","female_share","twenty_share","thirty_share","fourty_share","fifty_share","party")
for(i in 1:1161){
datarow<-two_party_ads[i,]
impressions<-datarow$ad_imp
id<-datarow$adv_id
spend<-datarow$ad_spend
male_share<-datarow$men/impressions
female_share<-datarow$women/impressions
twenty_share<-datarow$twenties/impressions
thirty_share<-datarow$thirties/impressions
fourty_share<-datarow$fourties/impressions
fifty_share<-datarow$fifties/impressions
party<-datarow$ad_parties
new_row<-c(id,spend,male_share,female_share,round(1-fifty_share-fourty_share-thirty_share,3),
round(1-fifty_share-fourty_share,3),
round(1-fifty_share,3),
round(fifty_share,3),party)
stan_data<-rbind(stan_data,new_row)
}
stan_data<-stan_data[-1,]
i<-1
datarow<-two_party_ads[i,]
impressions<-datarow$ad_imp
id<-datarow$adv_id
spend<-datarow$ad_spend
male_share<-datarow$men/impressions
female_share<-datarow$women/impressions
twenty_share<-datarow$twenties/impressions
thirty_share<-datarow$thirties/impressions
fourty_share<-datarow$fourties/impressions
fifty_share<-datarow$fifties/impressions
party<-datarow$ad_parties
new_row<-c(id,spend,male_share,female_share,round(1-thirty_share,3),
round(1-fourty_share,3),
round(1-fifty_share,3),
round(fifty_share,3),party)
new_row
fourty_share
fifty_share
new_row<-c(id,spend,male_share,female_share,round(twenty_share-thirty_share,3),
round(thirty_share-fourty_share,3),
round(fourty_share-fifty_share,3),
round(fifty_share,3),party)
new_row
275+183+214+320
#Create STAN readable dataset
stan_data<-data.frame(matrix(0,ncol=9))
colnames(stan_data)<-c("id","spend","male_share","female_share","twenty_share","thirty_share","fourty_share","fifty_share","party")
for(i in 1:1161){
datarow<-two_party_ads[i,]
impressions<-datarow$ad_imp
id<-datarow$adv_id
spend<-datarow$ad_spend
male_share<-datarow$men/impressions
female_share<-datarow$women/impressions
twenty_share<-datarow$twenties/impressions
thirty_share<-datarow$thirties/impressions
fourty_share<-datarow$fourties/impressions
fifty_share<-datarow$fifties/impressions
party<-datarow$ad_parties
new_row<-c(id,spend,male_share,female_share,round(twenty_share-thirty_share,4),
round(thirty_share-fourty_share,4),
round(fourty_share-fifty_share,4),
round(fifty_share,4),party)
stan_data<-rbind(stan_data,new_row)
}
stan_data<-stan_data[-1,]
library(dplyr)
stan_data%>%filter(spend>0)
stan_data%>%filter(spend>0)->stan_data
stan_data%>%mutate_at(twenty_share=max(0,twenty_share))
stan_data%>%mutate(twenty_share=max(0,twenty_share))
stan_data%>%mutate(twenty_share=max(0,twenty_share))
stan_data%>%mutate(twenty_share=ifelse(twenty_share>0,twenty_share,0))
stan_data%>%mutate(twenty_share=ifelse(twenty_share>0,twenty_share,0))->stan_data
stan_data%>%mutate(thirty_share=ifelse(thirty_share>0,thirty_share,0))->stan_data
stan_data%>%mutate(fourty_share=ifelse(fourty_share>0,fourty_share,0))->stan_data
stan_data%>%mutate(fifty_share=ifelse(fifty_share>0,fifty_share,0))->stan_data
stan_data%>%filter(female_share<=1)->stan_data
stan_data%>%filter(male_share<=1)->stan_data
View(stan_data)
stan_data%>%filter(twenty_share<=1)->stan_data
stan_data%>%filter(thirty_share<=1)->stan_data
stan_data%>%filter(fourty_share<=1)->stan_data
stan_data%>%filter(fifty_share<=1)->stan_data
#Create STAN readable dataset
library(dplyr)
stan_data<-data.frame(matrix(0,ncol=9))
colnames(stan_data)<-c("id","spend","male_share","female_share","twenty_share","thirty_share","fourty_share","fifty_share","party")
for(i in 1:1161){
datarow<-two_party_ads[i,]
impressions<-datarow$ad_imp
id<-datarow$adv_id
spend<-datarow$ad_spend
male_share<-datarow$men/impressions
female_share<-datarow$women/impressions
twenty_share<-datarow$twenties/impressions
thirty_share<-datarow$thirties/impressions
fourty_share<-datarow$fourties/impressions
fifty_share<-datarow$fifties/impressions
party<-datarow$ad_parties
new_row<-c(id,spend,male_share,female_share,round(twenty_share-thirty_share,4),
round(thirty_share-fourty_share,4),
round(fourty_share-fifty_share,4),
round(fifty_share,4),party)
stan_data<-rbind(stan_data,new_row)
}
stan_data<-stan_data[-1,]
#Create STAN readable dataset
library(dplyr)
stan_data<-data.frame(matrix(0,ncol=9))
colnames(stan_data)<-c("id","spend","male_share","female_share","twenty_share","thirty_share","fourty_share","fifty_share","party")
for(i in 1:1161){
datarow<-two_party_ads[i,]
impressions<-datarow$ad_imp
id<-datarow$adv_id
spend<-datarow$ad_spend
male_share<-datarow$men/impressions
female_share<-datarow$women/impressions
twenty_share<-datarow$twenties/impressions
thirty_share<-datarow$thirties/impressions
fourty_share<-datarow$fourties/impressions
fifty_share<-datarow$fifties/impressions
party<-datarow$ad_parties
new_row<-c(id,spend,male_share,female_share,round(twenty_share-thirty_share,3),
round(thirty_share-fourty_share,3),
round(fourty_share-fifty_share,3),
round(fifty_share,3),party)
stan_data<-rbind(stan_data,new_row)
}
stan_data<-stan_data[-1,]
stan_data%>%filter(spend>0)->stan_data
stan_data%>%filter(female_share>=1)
stan_data%>%filter(female_share>1)
stan_data%>%filter(male_share>1)
stan_data%>%filter(female_share<=1)->stan_data
stan_data%>%filter(male_share>1)
stan_data%>%filter(male_share<=1)->stan_data
stan_data%>%filter(twenty_share>1)
stan_data%>%filter(twenty_share<=1)->stan_data
stan_data%>%filter(thirty_share>1)
stan_data%>%filter(thirty_share<=1)->stan_data
stan_data%>%filter(fourty_share>1)
stan_data%>%filter(fourty_share<=1)->stan_data
stan_data%>%filter(fifty_share>1)
stan_data%>%filter(twenty_share<=1)->stan_data
stan_data%>%filter(thirty_share<=1)->stan_data
stan_data%>%filter(fourty_share<=1)->stan_data
stan_data%>%filter(fifty_share<=1)->stan_data
stan_data%>%mutate(twenty_share=ifelse(twenty_share>0,twenty_share,0))->stan_data
stan_data%>%mutate(thirty_share=ifelse(thirty_share>0,thirty_share,0))->stan_data
stan_data%>%mutate(fourty_share=ifelse(fourty_share>0,fourty_share,0))->stan_data
stan_data%>%mutate(fifty_share=ifelse(fifty_share>0,fifty_share,0))->stan_data
ls()
ls()-"stan_data"
"stan_data"-ls()
ls()/"stan_data"
setdiff(ls(),"stan_data")
rm(setdiff(ls(),"stan_data"))
setdiff(ls(),"stan_data")
rm(list=setdiff(ls(),"stan_data"))
save.image("~/Desktop/Sites/Auctions_regulation/stan_data.RData")
load("~/Desktop/Sites/Auctions_regulation/polads_dataset.RData")
#Create STAN readable dataset
library(dplyr)
stan_data<-data.frame(matrix(0,ncol=10))
colnames(stan_data)<-c("id","imps","spend","male_share","female_share","twenty_share","thirty_share","fourty_share","fifty_share","party")
for(i in 1:1161){
datarow<-two_party_ads[i,]
impressions<-datarow$ad_imp
id<-datarow$adv_id
spend<-datarow$ad_spend
male_share<-datarow$men/impressions
female_share<-datarow$women/impressions
twenty_share<-datarow$twenties/impressions
thirty_share<-datarow$thirties/impressions
fourty_share<-datarow$fourties/impressions
fifty_share<-datarow$fifties/impressions
party<-datarow$ad_parties
new_row<-c(id,impressions,spend,male_share,female_share,round(twenty_share-thirty_share,3),
round(thirty_share-fourty_share,3),
round(fourty_share-fifty_share,3),
round(fifty_share,3),party)
stan_data<-rbind(stan_data,new_row)
}
stan_data<-stan_data[-1,]
stan_data%>%filter(spend>0)->stan_data
stan_data%>%filter(female_share<=1)->stan_data
stan_data%>%filter(male_share<=1)->stan_data
stan_data%>%filter(twenty_share<=1)->stan_data
stan_data%>%filter(thirty_share<=1)->stan_data
stan_data%>%filter(fourty_share<=1)->stan_data
stan_data%>%filter(fifty_share<=1)->stan_data
stan_data%>%mutate(twenty_share=ifelse(twenty_share>0,twenty_share,0))->stan_data
stan_data%>%mutate(thirty_share=ifelse(thirty_share>0,thirty_share,0))->stan_data
stan_data%>%mutate(fourty_share=ifelse(fourty_share>0,fourty_share,0))->stan_data
stan_data%>%mutate(fifty_share=ifelse(fifty_share>0,fifty_share,0))->stan_data
rm(list=setdiff(ls(),"stan_data"))
save.image("~/Desktop/Sites/Auctions_regulation/stan_data.RData")
10/1500
23/1600
85/2.78
2.78/85
library(readr)
ydata_ysm_advertiser_bids_v1_0 <- read_delim("ydata-ysm-advertiser-bids-v1_0.txt",
"\t", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(ydata_ysm_advertiser_bids_v1_0)
ydata_ysm_advertiser_bids_v1_0$X4
hist(ydata_ysm_advertiser_bids_v1_0$X4)
hist(ydata_ysm_advertiser_bids_v1_0[ydata_ysm_advertiser_bids_v1_0$X4<10,]$X4)
rm(ydata_ysm_advertiser_bids_v1_0)
(0.25)^4
0.01*0.99
0.6*0.4
0.5*0.5
0.25*0.75
save.image("~/Desktop/Sites/Auctions_regulation/stan_data.RData")
stan_data$party=="d"
as.numeric(stan_data$party=="d")
stan_data[,(6:9)]
as.matrix(stan_data[,(6:9)])
as.matrix(as.numeric(stan_data[,(6:9)]))
as.numeric(as.matrix(stan_data[,(6:9)]))
(as.matrix(stan_data[,(6:9)]), ncol=4)
(as.matrix(stan_data[,(6:9)],ncol=4))
(as.matrix(as.numeric(stan_data[,(6:9)]),ncol=4))
(as.matrix((stan_data[,(6:9)]),ncol=4))
age_share_matrix<-(as.matrix((stan_data[,(6:9)]),ncol=4))
numeric(age_share_matrix)
numeric(age_share_matrix,length = 1047*4)
numeric(age_share_matrix)
as.numeric(age_share_matrix)
as.matrix(as.numeric(age_share_matrix))
as.matrix(as.numeric(age_share_matrix),ncol=4)
as.matrix(as.numeric(age_share_matrix),ncol=4)
matrix(as.numeric(age_share_matrix),ncol=4)
age_share_matrix<-(matrix((stan_data[,(6:9)]),ncol=4))
age_share_matrix<-(as.matrix((stan_data[,(6:9)]),ncol=4))
age_share_matrix<-matrix(as.numeric(age_share_matrix),ncol=4)
gender_share_matrix<-(as.matrix((stan_data[,(4:5)]),ncol=2))
gender_share_matrix<-matrix(as.numeric(gender_share_matrix),ncol=2)
stan_input<-list(N=1047, J=4, K=2, jj=age_share_matrix, kk=gender_share_matrix,democrat=democrat_vec,
spend=spending_vec,impression=impressions_vec)
spending_vec<-stan_data$spend
impressions_vec<-stan_data$imps
democrat_vec<-as.numeric(stan_data$party=="d")
age_share_matrix<-(as.matrix((stan_data[,(6:9)]),ncol=4))
age_share_matrix<-matrix(as.numeric(age_share_matrix),ncol=4)
gender_share_matrix<-(as.matrix((stan_data[,(4:5)]),ncol=2))
gender_share_matrix<-matrix(as.numeric(gender_share_matrix),ncol=2)
stan_input<-list(N=1047, J=4, K=2, jj=age_share_matrix, kk=gender_share_matrix,democrat=democrat_vec,
spend=spending_vec,impression=impressions_vec)
spending_vec<-as.numeric(stan_data$spend)
impressions_vec<-as.numeric(stan_data$imps)
democrat_vec<-as.numeric(stan_data$party=="d")
age_share_matrix<-(as.matrix((stan_data[,(6:9)]),ncol=4))
age_share_matrix<-matrix(as.numeric(age_share_matrix),ncol=4)
gender_share_matrix<-(as.matrix((stan_data[,(4:5)]),ncol=2))
gender_share_matrix<-matrix(as.numeric(gender_share_matrix),ncol=2)
stan_input<-list(N=1047, J=4, K=2, jj=age_share_matrix, kk=gender_share_matrix,democrat=democrat_vec,
spend=spending_vec,impression=impressions_vec)
save.image("~/Desktop/Sites/Auctions_regulation/stan_data.RData")
library(rstan)
setwd("~/Desktop/Sites/Auctions_regulation")
options(mc.cores = parallel::detectCores())
myiters<-100
mywarmup<-50
myadapt<-0.8
n_chains <- 2
fitlong<-stan(file ="stan_model",data = stan_input,seed=123,chains = n_chains,
iter = myiters,warmup = mywarmup,init=inits,verbose = TRUE,save_warmup = TRUE,
control = list(adapt_delta = myadapt,max_treedepth = 15))
saveRDS(fitlong, file = "fitlong.rds")
myiters<-100
mywarmup<-50
myadapt<-0.8
n_chains <- 2
fitlong<-stan(file ="stan_model.stan",data = stan_input,seed=123,chains = n_chains,
iter = myiters,warmup = mywarmup,init=inits,verbose = TRUE,save_warmup = TRUE,
control = list(adapt_delta = myadapt,max_treedepth = 15))
saveRDS(fitlong, file = "fitlong.rds")
fitlong<-stan(file ="stan_model.stan",data = stan_input,seed=123,chains = n_chains,
iter = myiters,warmup = mywarmup,init=inits,verbose = TRUE,save_warmup = TRUE,
control = list(adapt_delta = myadapt,max_treedepth = 15))
